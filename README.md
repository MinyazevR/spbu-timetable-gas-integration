# spbu-timetable-integration
Интеграция расписания СПБГУ в Google Calendar при помощи Google Apps Script, с возможностью использования на Android и IOS устройствах.

#### Для чего это нужно
Можно получить .ics файл с расписанием СПБГУ GET запросом, указав нужные параметры, после чего добавить ссылку в Google Calendar (то есть подписаться на календарь). Однако, из подписанных календарей, Google Calendar быстро обновляет только другие Google календари, а календари из сторонних ресурсов он может не обновлять вообще. Для получения актуального раписания пользователю необходимо предоставить разрешения на изменения своих календарей. Если Вы пользователь Google Calendar и не хотите давать доступ к своим календарям со своего аккаунта, можете создать еще один аккаунт и проследовать инструкции для Google Calendar, после чего подписаться со своего аккаунта на календарь из нового аккаунта(это будет работать, так как Google Calendar быстро обновляет подписанные Google календари)

#### Почему Google Apps Script
После того как пользователь пройдет авторизацию и даст доступ к своим календарям, появляется необходимость хранить refresh token и другие данные для всех пользователей в бд, а также безопасно хранить access token, в связи с чем появляются определенные риски. Google Apps Script предоставляет доступ к сервисам Google (к Google Calendar), минуя эти риски.

#### Для пользователей Google Calendar
1. [Перейти по ссылке](https://script.google.com/d/1Vos3LjIA47jzbv6A6SKkvc-N-Us-_iWMWJvrRUEBI7wfXhjC-J7Wt5sS/edit?usp=sharing).
2. Скопировать проект (слева во вкладке "Общие сведения").
3. Проследовать инструкции в GoogleCalendar.gs.

#### Для пользователей Andoid и IOS
1. Проследовать инструкции для Google.
2. Добавьте в настройках календаря свой google account.
