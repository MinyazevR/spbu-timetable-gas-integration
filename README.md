# spbu-timetable-gas-integration
Интеграция расписания СПБГУ в Google и Yandex Calendar при помощи Google Apps Script, с возможностью использования на Android и IOS устройствах.

#### Для чего это нужно
Можно получить .ics файл с расписанием СПБГУ GET запросом, указав нужные параметры, после чего добавить ссылку в Google и Yandex Calendar (то есть подписаться на календарь). Однако, из подписанных календарей, Google Calendar быстро обновляет только другие Google календари, а календари из сторонних ресурсов он может не обновлять вообще. Yandex календарь может их обновлять до 2-ух дней, что критично для получения актуального расписания. Для получения актуального раписания пользователю необходимо предоставить разрешения на изменения своих календарей. Если Вы пользователь Google Calendar и не хотите давать доступ к своим календарям из основного аккаунта, можете создать еще один аккаунт и проследовать инструкции для Google Calendar, после чего подписаться с основного аккаунта на календарь из нового аккаунта(это будет работать, так как Google Calendar быстро обновляет подписанные Google календари)

#### Почему Google Apps Script
После того как пользователь пройдет авторизацию и даст доступ к своим календарям, появляется необходимость хранить refresh token и другие данные для всех пользователей в бд, в связи с чем появляются определенные риски. Google Apps Script предоставляет доступ к сервисам Google (к Google Calendar), минуя эти риски.

#### Для пользователей Google и Yandex Calendar
1. [Перейти по ссылке](https://script.google.com/d/1Vos3LjIA47jzbv6A6SKkvc-N-Us-_iWMWJvrRUEBI7wfXhjC-J7Wt5sS/edit?usp=sharing).
2. Скопировать проект (слева во вкладке "Общие сведения").
3. Для Google: проследовать инструкции в GoogleCalendar.gs.
4. Для Yandex: проследовать инструкции в YandexCalendar.gs.

#### Для пользователей Andoid и IOS
1. Проследовать инструкции для Google или Yandex Calendar (по желанию).
2. Если Вы выбрали Google:  добавьте в настройки календаря свой google account.
3. Если вы выбрали Yandex: [проследуйте инструкции](https://yandex.ru/support/calendar/common/sync/sync-mobile.html).
